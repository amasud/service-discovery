# Service Discovery — Changelog

## v5.1 (2026-02-15)
### Widget
- Redesigned to match ServiceNow Service Portal styling (Source Sans Pro, SN colors)
- Home: Teal gradient hero, Overview cards, Quick Links, Recent Runs sidebar, GenAI sparkle
- Dashboard: "Opportunity Brief" header, "Search for a company or product", sentence case headers
- Dashboard: Gap columns show type + count (KB Articles: 3, Catalog Items: 2) at all levels
- Dashboard: "View coverage" replaces "View gap", coverage modal split into Covered/Gaps sections
- Dashboard: Product pills neutral (no green), facet toggle below summary
- Dashboard: Coverage % rollup fixed (uses topic count, not product combos)
- Dashboard: Gaps Only mode properly hides categories with zero gap-topics
- New Run: Date from/to pickers, Assignment Groups, KB/Catalog filters, Run Name required
- Registry: Run selector dropdown, search box, Add Company button
- CSS: Larger titles (1.5rem), better spacing (24px padding, 20px margins), readable body text

### AI / Classification
- Created NASK skill "SDClassifySupply" using AWS Claude (Bedrock)
- Skill classifies KB articles and catalog items against taxonomy
- Extracts company and product names from artifact text
- GetTaxonomy script tool pulls all topics from u_x_snc_sd_opportunity
- Batch classification script (sd_classify_supply.js) loops through KB + catalog
- Correct OneExtendUtil payload format: payload.inputValues
- Correct response parsing: result.capabilities[CAPABILITY_ID].response

## v4.2 (2026-02-14)
### Widget
- Configure: Added state/priority filters for incidents, KB/Catalog filter sections
- Configure: startRun navigates to registry on complete
- Registry: Run context banner, Edit button with inline edit form
- Dashboard: Summary uses getLiveStats() counting actual topic gap flags
- Dashboard: Trend column at topic level
- Dashboard: "Gaps" label when both KB + Catalog gap
- Dashboard: "Company - Product" on one line
- Dashboard: Supply modal shows KB and Catalog gaps as separate recommendation cards

## v4.1 (2026-02-14)
### Server Script
- startRun actually queries incidents with date range, assignment group, category, limit
- Creates classification records linked to run via u_analysis_run
- Simple keyword matching for topic + product (Phase 1)
- Product rows now appear because classifications have u_product set

## v4 (2026-02-14)
### Widget
- Run lifecycle: create → classify → complete
- Run selector dropdown on dashboard
- Filter grid on configure page
- Facet toggle (Gaps Only / All)

## v3 (2026-02-13)
### Widget
- Initial 4-view structure: Home, Configure, Registry, Dashboard
- Category → Topic → Product hierarchy
- Modal for demand/supply details
- Owner filter with autocomplete suggestions
